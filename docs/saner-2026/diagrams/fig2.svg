<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="none" stroke="#000" stroke-width="1" />
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="none" stroke="#006600" stroke-width="1" />
    </marker>
  </defs>
  <rect x="5" y="5" width="890" height="490" fill="white" stroke="black" stroke-width="1" />
  <rect x="20" y="40" width="80" height="40" fill="white" stroke="black" stroke-width="1" />
  <text x="60" y="60" text-anchor="middle" font-size="11">User</text>
  <text x="60" y="72" text-anchor="middle" font-size="9" fill="#666">Spec/Intent</text>
  <rect x="130" y="40" width="140" height="60" fill="#e8f4e8" stroke="black" stroke-width="1.5" />
  <text x="200" y="60" text-anchor="middle" font-size="12" font-weight="bold">Orchestrator</text>
  <text x="200" y="75" text-anchor="middle" font-size="10">(FSM)</text>
  <text x="200" y="90" text-anchor="middle" font-size="9" fill="#666">Stack selection</text>
  <rect x="130" y="130" width="140" height="60" fill="#fff0e0" stroke="black" stroke-width="1.5" />
  <text x="200" y="150" text-anchor="middle" font-size="12" font-weight="bold">Task Runner</text>
  <text x="200" y="165" text-anchor="middle" font-size="9">Generate→Validate</text>
  <text x="200" y="178" text-anchor="middle" font-size="9">→Repair</text>
  <g id="stack-adapters">
    <rect x="320" y="40" width="320" height="200" fill="none" stroke="black" stroke-width="1" stroke-dasharray="4,2" />
    <text x="480" y="30" text-anchor="middle" font-size="12" font-weight="bold">Stack Adapters</text>
    <rect x="340" y="60" width="130" height="40" fill="#f0f8ff" stroke="black" stroke-width="1" />
    <text x="405" y="77" text-anchor="middle" font-size="10">Data Model Actor</text>
    <text x="405" y="90" text-anchor="middle" font-size="9" fill="#666">Schema gen</text>
    <rect x="340" y="120" width="130" height="40" fill="#f0f8ff" stroke="black" stroke-width="1" />
    <text x="405" y="137" text-anchor="middle" font-size="10">API/Backend Actor</text>
    <text x="405" y="150" text-anchor="middle" font-size="9" fill="#666">Route handlers</text>
    <rect x="490" y="60" width="130" height="40" fill="#f0f8ff" stroke="black" stroke-width="1" />
    <text x="555" y="77" text-anchor="middle" font-size="10">UI/Frontend Actor</text>
    <text x="555" y="90" text-anchor="middle" font-size="9" fill="#666">Components</text>
  </g>
  <rect x="680" y="60" width="120" height="50" fill="#ffe8e8" stroke="black" stroke-width="1.5" />
  <text x="740" y="78" text-anchor="middle" font-size="11" font-weight="bold">Sandbox</text>
  <text x="740" y="92" text-anchor="middle" font-size="10">Manager</text>
  <text x="740" y="104" text-anchor="middle" font-size="9" fill="#666">(containers)</text>
  <rect x="680" y="140" width="120" height="50" fill="#e0f0ff" stroke="black" stroke-width="1.5" />
  <text x="740" y="158" text-anchor="middle" font-size="11" font-weight="bold">Validation</text>
  <text x="740" y="172" text-anchor="middle" font-size="10">Layer</text>
  <text x="740" y="184" text-anchor="middle" font-size="9" fill="#666">(lint, type, test)</text>
  <rect x="820" y="40" width="70" height="180" fill="#fffaf0" stroke="black" stroke-width="1" />
  <text x="855" y="55" text-anchor="middle" font-size="9" font-weight="bold">Validators</text>
  <text x="825" y="70" font-size="8">• ESLint</text>
  <text x="825" y="85" font-size="8">• TypeScript</text>
  <text x="825" y="100" font-size="8">• PHPStan</text>
  <text x="825" y="115" font-size="8">• pytest</text>
  <text x="825" y="130" font-size="8">• ruff</text>
  <text x="825" y="145" font-size="8">• Playwright</text>
  <text x="825" y="160" font-size="8">• Laravel</text>
  <text x="825" y="175" font-size="8">• Feature</text>
  <text x="825" y="190" font-size="8">  tests</text>
  <rect x="320" y="280" width="200" height="50" fill="#f5f5f5" stroke="black" stroke-width="1" stroke-dasharray="3,3" />
  <text x="420" y="300" text-anchor="middle" font-size="11" font-weight="bold">LLM Backends</text>
  <text x="420" y="315" text-anchor="middle" font-size="9" fill="#666">(pluggable)</text>
  <text x="420" y="328" text-anchor="middle" font-size="8" fill="#666">Claude, GPT, Gemini</text>
  <rect x="550" y="280" width="140" height="50" fill="white" stroke="black" stroke-width="1" />
  <text x="620" y="300" text-anchor="middle" font-size="11" font-weight="bold">Database</text>
  <text x="620" y="315" text-anchor="middle" font-size="9" fill="#666">(generic, provisioned)</text>
  <path d="M 100 60 L 130 60" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 200 100 L 200 130" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 270 160 L 320 160" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 270 70 Q 295 70 295 80 L 340 80" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 470 80 L 490 80" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 470 140 L 490 140" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 620 80 L 680 80" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 740 110 L 740 140" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 800 165 L 820 165" fill="none" stroke="black" stroke-width="1" marker-end="url(#arrow)" />
  <path d="M 680 165 Q 630 165 630 190 Q 480 190 480 160" fill="none" stroke="#006600" stroke-width="1" stroke-dasharray="3,2" marker-end="url(#arrow-green)" />
  <text x="580" y="185" font-size="8" fill="#006600">accepted</text>
  <path d="M 420 280 Q 420 240 405 240 L 405 160" fill="none" stroke="#666" stroke-width="1" stroke-dasharray="2,2" marker-end="url(#arrow)" />
  <text x="380" y="220" font-size="8" fill="#666">context</text>
  <path d="M 620 280 Q 620 250 555 250 L 555 100" fill="none" stroke="#666" stroke-width="1" stroke-dasharray="2,2" marker-end="url(#arrow)" />
  <text x="570" y="235" font-size="8" fill="#666">schema</text>
  <g id="legend" transform="translate(20, 380)">
    <text x="0" y="0" font-size="10" font-weight="bold">Legend:</text>
    <line x1="0" y1="10" x2="30" y2="10" stroke="black" stroke-width="1" />
    <text x="35" y="14" font-size="9">Control flow</text>
    <line x1="0" y1="25" x2="30" y2="25" stroke="#666" stroke-width="1" stroke-dasharray="2,2" />
    <text x="35" y="29" font-size="9">Data flow</text>
    <line x1="0" y1="40" x2="30" y2="40" stroke="#006600" stroke-width="1" stroke-dasharray="3,2" />
    <text x="35" y="44" font-size="9">Feedback loop</text>
    <rect x="0" y="55" width="30" height="15" fill="none" stroke="black" stroke-width="1" stroke-dasharray="4,2" />
    <text x="35" y="66" font-size="9">Component group</text>
  </g>
</svg>


